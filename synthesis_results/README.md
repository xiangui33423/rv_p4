# RV-P4 ASIC é¢ç§¯è¯„ä¼°ç»“æœ

## ğŸ“Š å¿«é€Ÿæ€»ç»“

**ä¼°ç®—çš„èŠ¯ç‰‡é¢ç§¯ï¼š89.8 mmÂ²ï¼ˆ130nm Sky130 å·¥è‰ºï¼‰**

```
èŠ¯ç‰‡å°ºå¯¸ï¼š9.47 mm Ã— 9.47 mm
æ ¸å¿ƒé€»è¾‘ï¼š46.5 mmÂ²
åŠ ä¸Šå¸ƒçº¿å¼€é”€å’Œåˆ©ç”¨ç‡ï¼š89.8 mmÂ²
```

## ğŸ“ æ–‡ä»¶è¯´æ˜

### ğŸ¯ å…³é”®ç»“æœæ–‡ä»¶

- **`area_estimate.json`** - æœºå™¨å¯è¯»çš„é¢ç§¯ä¼°è®¡æ•°æ®
  ```json
  {
    "process": "Sky130 130nm",
    "modules": { ... },
    "summary": {
      "total_core_area_mm2": 46.5,
      "estimated_die_area_mm2": 89.8,
      ...
    }
  }
  ```

### ğŸ“‹ æŠ¥å‘Šæ–‡ä»¶ï¼ˆYosys ç»¼åˆåç”Ÿæˆï¼‰

- **`rv_p4_netlist.v`** - ç»¼åˆåçš„ Verilog ç½‘è¡¨
- **`rv_p4_netlist.json`** - JSON æ ¼å¼ç½‘è¡¨ï¼ˆä¾¿äºç¼–ç¨‹å¤„ç†ï¼‰
- **`stats_mapped.txt`** - å•å…ƒç±»å‹è®¡æ•°å’Œç»Ÿè®¡
- **`area_report.txt`** - è¯¦ç»†çš„é¢ç§¯åˆ†è§£æŠ¥å‘Š
- **`SYNTHESIS_REPORT.md`** - ç»¼åˆæ€»ç»“æŠ¥å‘Š

### ğŸ“ˆ è°ƒè¯•æ–‡ä»¶

- **`rv_p4_rtl_graph.dot`** - RTL ç»“æ„å›¾ï¼ˆGraphviz æ ¼å¼ï¼‰
- **`logs/01_elaboration.log`** - RTL è§£ææ—¥å¿—
- **`logs/02_synthesis.log`** - ç»¼åˆè¿‡ç¨‹æ—¥å¿—

## ğŸ”„ æ•°æ®æµ

```
RTL æºæ–‡ä»¶ (rtl/*.sv)
    â†“
[estimate_area.py] æˆ– [Yosys]
    â†“
area_estimate.json / stats_mapped.txt
    â†“
area_report.txt (é¢ç§¯åˆ†è§£)
    â†“
âœ“ é¢ç§¯è¯„ä¼°å®Œæˆ
```

## ğŸ¯ å¦‚ä½•ä½¿ç”¨è¿™äº›æ•°æ®

### Python è§£æ JSON

```python
import json

with open('synthesis_results/area_estimate.json') as f:
    data = json.load(f)

# è·å–æ ¸å¿ƒé¢ç§¯
core_area = data['summary']['total_core_area_mm2']
print(f"Core area: {core_area:.2f} mmÂ²")

# è·å–å„æ¨¡å—é¢ç§¯
for module, info in data['modules'].items():
    print(f"{module}: {info['area_mm2']:.3f} mmÂ²")
```

### è„šæœ¬æå–å•å…ƒç»Ÿè®¡

```bash
# æå– SRAM å•å…ƒæ•°
grep -i "sram" stats_mapped.txt

# æŸ¥çœ‹å‰ 20 ä¸ªæœ€å¸¸ç”¨çš„å•å…ƒç±»å‹
head -20 area_report.txt

# è®¡ç®—ç‰¹å®šå•å…ƒç±»å‹çš„é¢ç§¯å æ¯”
awk '/Cell Type Distribution/,/TOTAL/' area_report.txt
```

## ğŸ“Š é¢ç§¯æ„æˆè¯¦è§£

### 1. Packet Buffer (54.1% - 25.2 mmÂ²)

```
2 MB SRAM ç¼“å†²åŒº
= 2048 KB Ã— 8 bits/byte
= 16,384 Kb = 16.7 Mb

Sky130 SRAM é¢ç§¯ç³»æ•°ï¼š~1.5 Î¼mÂ²/bit
æ€»é¢ç§¯ï¼š16.7M bits Ã— 1.5 Î¼mÂ²/bit â‰ˆ 25.2 mmÂ²
```

**å‡å°æ–¹å‘**ï¼š
- è¯„ä¼°æœ€å¤§æµé‡çªå‘ â†’ å¯èƒ½å‡å°‘ç¼“å†²å¤§å°
- åˆ†å±‚è®¾è®¡ï¼ˆeDRAM + SRAMï¼‰
- å‹ç¼©å­˜å‚¨æ ¼å¼

### 2. MAU Stages (41.3% - 19.2 mmÂ²)

```
4 ä¸ª Match-Action Unit çº§è”
æ¯çº§åŒ…å«ï¼š
- TCAMï¼š1024 entries Ã— 320 bits = 327 Kb
- SRAMï¼š4096 entries Ã— 128 bits = 512 Kb
- é€»è¾‘ï¼šALUã€Hashã€Mux

æ€»é¢ç§¯ â‰ˆ 19.2 mmÂ²
```

**å‡å°æ–¹å‘**ï¼š
- å‡å°‘ TCAM æ·±åº¦ï¼ˆ1024 â†’ 512ï¼‰
- å‡å°‘ SRAM å®½åº¦ï¼ˆå‹ç¼©æ•°æ®æ ¼å¼ï¼‰
- ä¼˜åŒ–æµæ°´çº¿æ·±åº¦ï¼ˆå¯èƒ½å¢åŠ æ—¶å»¶ï¼‰

### 3. Parser (3.7% - 1.7 mmÂ²)

```
P4 åŒ…è§£æå¼•æ“
- ä¸€æ¬¡æ€§é€»è¾‘ï¼ˆä¸éœ€ä¼˜åŒ–ï¼‰
- é¢ç§¯ç›¸å¯¹è¾ƒå°
```

### 4. å…¶ä»– (0.9%)

```
- Traffic Manager (é˜Ÿåˆ—è°ƒåº¦)
- Deparser (æŠ¥æ–‡é‡ç»„)
- TUE (è¡¨æ›´æ–°å¼•æ“)
- æ§åˆ¶å¹³é¢
- æ—¶é’ŸåŸŸäº¤å‰å’Œå¤ä½åŒæ­¥
```

## âš™ï¸ å·¥è‰ºåº“å‚æ•°

### Sky130 åº“ç‰¹æ€§

| å‚æ•° | å€¼ |
|------|-----|
| å·¥è‰ºèŠ‚ç‚¹ | 130 nm |
| ç”µå‹ | 1.8 V |
| æœ€å°é‡‘å±èŠ‚è· | 360 nm |
| æœ€å°å•å…ƒé«˜åº¦ | 2.72 Î¼m (8 è½¨) |
| é‡‘å±å±‚æ•° | 6-7 å±‚ |
| å¯ç”¨ SRAM å¤§å° | 1 Kb, 4 Kb, 64 Kb, 256 Kb |
| åº“è®¸å¯ | å®Œå…¨å¼€æº (Apache 2.0) |

## ğŸ”¬ ä¼°ç®—æ–¹æ³•å­¦

### ç²¾åº¦çº§åˆ«

1. **é™æ€ RTL åˆ†æ** (å·²å®Œæˆ)
   - ç²¾åº¦ï¼šÂ±30%
   - å·¥å…·ï¼šPython è„šæœ¬
   - æ—¶é—´ï¼š<1ç§’
   - ä¾èµ–é¡¹ï¼šæ— 

2. **Yosys ç»¼åˆ** (å¯é€‰)
   - ç²¾åº¦ï¼šÂ±15-20%
   - å·¥å…·ï¼šYosys + Sky130
   - æ—¶é—´ï¼š1-5 åˆ†é’Ÿ
   - ä¾èµ–é¡¹ï¼šYosys, Sky130 PDK

3. **å®Œæ•´ P&R** (åæœŸ)
   - ç²¾åº¦ï¼šÂ±5%
   - å·¥å…·ï¼šOpenROAD + Magic
   - æ—¶é—´ï¼š10-30 åˆ†é’Ÿ
   - ä¾èµ–é¡¹ï¼šå®Œæ•´ EDA å·¥å…·é“¾

## ğŸ“ åç»­æ­¥éª¤

1. **éªŒè¯ä¼°ç®—**
   - ä½¿ç”¨ Yosys è¿›è¡Œè¯¦ç»†ç»¼åˆ
   - å¯¹æ¯”ç»“æœä»¥éªŒè¯ç²¾åº¦

2. **ä¼˜åŒ–è®¾è®¡**
   - å¦‚æœé¢ç§¯è¿‡å¤§ï¼Œä¼˜åŒ– SRAM å¤§å°
   - è¯„ä¼°åŠŸè€—ä¸é¢ç§¯çš„æƒè¡¡

3. **æµç‰‡å‡†å¤‡**
   - è¿è¡Œ OpenROAD å®Œæ•´ P&R
   - ç”Ÿæˆ GDS-II æ–‡ä»¶
   - è¿›è¡Œ DRC/LVS éªŒè¯

## ğŸ”— ç›¸å…³æ–‡ä»¶

- **`../docs/03-asic-flow/ASIC_AREA_EVALUATION.md`** - å®Œæ•´è¯„ä¼°æŒ‡å—
- **`../docs/03-asic-flow/AREA_ESTIMATION_QUICK_REFERENCE.md`** - å¿«é€Ÿå‚è€ƒå¡
- **`../docs/README.md`** - ğŸ“š æ–‡æ¡£å¯¼èˆªä¸­å¿ƒ
- **`../scripts/estimate_area.py`** - é™æ€åˆ†æè„šæœ¬
- **`../scripts/run_synthesis.sh`** - Yosys ç»¼åˆè„šæœ¬

---

*ç”Ÿæˆäº 2026-02-19*
*å·¥å…·ï¼šPython RTL åˆ†æ + Sky130 åº“å‚æ•°*
